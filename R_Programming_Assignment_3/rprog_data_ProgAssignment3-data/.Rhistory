data <-read.csv("outcome-of-care-measures.csv",
colClasses = "character"
)
## Check that state and outcome are valid
if (any(data$State == state)) {
## Return hospital name in that state with lowest 30-day death
df <- data[data$State == state, ]
if (outcome == "heart attack") {
browser()
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
na.rm = TRUE
)
best_hospital <- sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality, ]$Hospital.Name)[1]
} else if (outcome == "heart failure") {
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,
na.rm = TRUE
)
best_hospital <- sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]$Hospital.Name)[1]
} else if (outcome == "pneumonia") {
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia,
na.rm = TRUE
)
best_hospital <- sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia == lowest_mortality, ]$Hospital.Name)[1]
}
## rate
return()
} else {
stop("Invalid state")
}
}
best("TX", "heart attack")
sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality, ]$Hospital.Name)[1]
sort(df[df$Number.of.Patients...Hospital.30.Day.Readmission.Rates.from.Heart.Attack == lowest_mortality, ]$Hospital.Name)
df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality, ]
df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality, ]$Hospital.Name
df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality
View(df)
## 1 Plot the 30-day mortality rates for heart attack
outcome <- read.csv("outcome-of-care-measures.csv", colClasses = "character")
outcome[, 11] <- as.numeric(outcome[, 11])
hist(outcome[, 11])
## 2 Finding the best hospital in a state
best <- function(state, outcome) {
## Read outcome data
data <- read.csv("outcome-of-care-measures.csv",
colClasses = "character"
)
## Check that state and outcome are valid
if (any(data$State == state)) {
## Return hospital name in that state with lowest 30-day death
df <- data[data$State == state, ]
if (outcome == "heart attack") {
browser()
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
na.rm = TRUE
)
best_hospital <- sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality, ]$Hospital.Name)[1]
} else if (outcome == "heart failure") {
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,
na.rm = TRUE
)
best_hospital <- sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]$Hospital.Name)[1]
} else if (outcome == "pneumonia") {
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia,
na.rm = TRUE
)
best_hospital <- sort(df[df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia == lowest_mortality, ]$Hospital.Name)[1]
}
## rate
return()
} else {
stop("Invalid state")
}
}
best("TX", "heart attack")
View(df)
df$Number.of.Patients...Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality
## 1 Plot the 30-day mortality rates for heart attack
outcome <- read.csv("outcome-of-care-measures.csv", colClasses = "character")
outcome[, 11] <- as.numeric(outcome[, 11])
hist(outcome[, 11])
## 2 Finding the best hospital in a state
best <- function(state, outcome) {
## Read outcome data
data <- read.csv("outcome-of-care-measures.csv",
colClasses = "character"
)
## Check that state and outcome are valid
if (any(data$State == state)) {
## Return hospital name in that state with lowest 30-day death
df <- data[data$State == state, ]
if (outcome == "heart attack") {
browser()
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
na.rm = TRUE
)
best_hospital <- sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack == lowest_mortality, ]$Hospital.Name)[1]
} else if (outcome == "heart failure") {
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,
na.rm = TRUE
)
best_hospital <- sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]$Hospital.Name)[1]
} else if (outcome == "pneumonia") {
lowest_mortality <-
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia,
na.rm = TRUE
)
best_hospital <- sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia == lowest_mortality, ]$Hospital.Name)[1]
}
## rate
return()
} else {
stop("Invalid state")
}
}
best("TX", "heart attack")
source("best.R")
best("TX", "heart attack")
best("TX", "heart failure")
best("MD", "heart attack")
best("MD", "pneumonia")
source("best.R")
best("TX", "heart failure")
View(df)
source("best.R")
best("TX", "heart failure")
df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure=10,]
df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure==10,]
df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure==10,]$Hospital.Name
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,
na.rm = TRUE
)
View(df)
source("best.R")
best("TX", "heart failure")
View(df)
source("best.R")
best("TX", "heart failure")
best("TX", "heart failure")
View(df)
View(data)
source("best.R")
best("TX", "heart failure")
source("best.R")
best("TX", "heart failure")
View(df)
apply(df, function(x) as.numeric(x))
df <-apply(df, function(x) as.numeric(x))
?apply(array, margin, ...)
df <-apply(df, 2, function(x) as.numeric(x))
dim(df[1,])
dim(df[,1])
df[1,]
df[,1]
length(df[,1])
length(df[1,])
length(df[1,])
length(df[1,1])
length(df[,1])
length(df[,2])
source("best.R")
best("TX", "heart failure")
View(df)
min(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, na.rm = TRUE)
df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure
as.numeric(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure)
source("best.R")
best("TX", "heart failure")
df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure
source("best.R")
best("TX", "heart failure")
df[,i]
length(df[,i])
source("best.R")
best("TX", "heart failure")
df[,i]
df[,i]<-as.numeric(df[,i])
df[,i]
source("best.R")
best("TX", "heart failure")
View(df)
View(df)
lowest_mortality
df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
source('best.R')
best("TX", "heart failure")
source("best.R")
best("TX", "heart failure")
source("best.R")
best("TX", "heart failure")
source("best.R")
best("TX", "heart failure")
best("MD", "heart attack")
best("MD", "pneumonia")
best("BB", "heart attack")
best("NY", "hert attack")
source("best.R")
best("NY", "hert attack")
source("rankhospital.R")
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("TX", "heart failure", 4)
df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
$Hospital.Name)[ranking]
sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
$Hospital.Name)[ranking]
gc()
best("NY", "hert attack")source("best.R")
source("best.R")
best("BB", "heart attack")
("MD", "heart attack")
("MD", "heart attack")
best("TX", "heart failure")
best("MD", "heart attack")
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
View(df)
View(df)
View(df)
sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
$Hospital.Name)[ranking]
sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ])[ranking]
sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ])
df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure
sort(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure)
sort(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure)[ranking]
lowest_mortality <-sort(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure)[ranking]
lowest_mortality
best_hospital <- sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
$Hospital.Name)[1]
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("TX", "heart failure", 4)
sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
$Hospital.Name)[1]
sort(df[df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure == lowest_mortality, ]
$Hospital.Name)
sort(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure)[ranking]
sort(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]
sort(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]
)
order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]
)
order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name))
df[order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]==4]
df[order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]==4,]
df[order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]==4,]
order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]
)
order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking]order(c(df
order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)[ranking])
order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name))
df[order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name))==4]
df[order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name))==4,]
sort(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure)
df[order(c(df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name),]
df[order((df
$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name),]
order((df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure, df$Hospital.Name)
order((df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name)
order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name)
df[order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name)]
df[order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name),]
df[order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name),][4]
x<-df[order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name),]
View(x)
x[4,]
x[1,4]
x[4,1]
x<-df[order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name),][1,4]
x<-df[order(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure,df$Hospital.Name),][4,1]
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
length(df)
dim(df)
dim(df)[1]
source("rankhospital.R")
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
View(df)
rankhospital("MD", "heart attack", "worst")
df[order(df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name),][ranking,1]
order(df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name)
f[order(df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name),]
x<-df[order(df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name),]
View(x)
df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack
dim(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack)
count.fields(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack)
count(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack)
length(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack)
sum(!is.na(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack))
length(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack)
sum(!is.na(df$Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack))
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("TX", "heart failure", 4)
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MN", "heart attack", 5000)
source("rankhospital.R")
> rankhospital("TX", "heart failure", 4)
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MD", "heart attack", "best")
rankhospital("MD", "heart attack", "be")
rankhospital("MN", "heart attack", 5000)
source('best.R')
best("SC", "heart attack")
source('rankall.R')
source('rankall.R')
rankall("heart attack", "best")
View(data)
head(data$State)
View(rankall)
setwd("/Volumes/Documents/Learning/Learn R/Programming Assignment_3_Hospital_Quality/rprog_data_ProgAssignment3-data")
setwd("/Volumes/Documents/Learning/Learn R/Programming Assignment_3_Hospital_Quality/rprog_data_ProgAssignment3-data")
source('rankall.R')
source('rankall.R')
rankall("heart attack", "best")
View(df)
source('rankall.R')
rankall("heart attack", "best")
View(df)
source('rankall.R')
rankall("heart attack", "best")
library(dplyr)
x<-c(1,2,3,4)
3 %in% x
3 in x
installed.packages()
"dplyr" %in% installed.packages()
install.packages("dplyr")
install.packages("dplyr")
install.packages("dplyr")
source('rankall.R')
rankall("heart attack", "best")
source('rankall.R')
rankall("heart attack", "best")
source('rankall.R')
rankall("heart attack", "best")
source('rankall.R')
rankall("heart attack", "best")
View(df)
source('rankall.R')
rankall("heart attack", "best")
View(df)
group_by(df)
unique(df$State)
source('rankall.R')
rankall("heart attack", "best")
unique(df$State)
source('rankall.R')
rankall("heart attack", "best")
group_by(df)
group_by(df$State)
group_by(df)
df %>% group_by(State, Hospital.Name)
df %>% group_by(State, Hospital.Name) %>summarise(total = sum(Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack))
df %>% group_by(State, Hospital.Name) %>% summarise(total = sum(Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack))
df$State
df$State
unique(df$State)
df[df$State=="AL",]
head(df[df$State=="AL",])
rownames(df)<df$State
head(df)
head(df[df$State=="AL",])
source(rankall())
source('rankall.R')
rankall("heart attack", "best")
View(df)
View(df)
best_hospital
source('rankall.R')
rankall("heart attack", "best")
source('rankall.R')
source('rankall.R')
source('rankall.R')
rankall("heart attack", "best")
View(df)
View(df)
View(df)
source('rankall.R')
rankall("heart attack", "best")
View(df_all)
source('rankall.R')
rankall("heart attack", "best")
View(df)
View(df)
View(df)
View(df_all)
View(df_all)
View(df)
source('rankall.R')
rankall("heart attack", "best")
View(df_all)
View(df)
View(df)
df[order(
df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name
), ]
df[order(
df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name
), ][ranking,]
df[order(
df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name
), ][ranking,c(1,2)]
source('rankall.R')
rankall("heart attack", "best")
View(df_out)
View(df_out)
df_out
rownames(df_out)<-df_out$State
df_out
head(rankall("heart attack", 20)
)
View(df_out)
rankall("heart attack", 20)
View(best_hospital)
df[order(
df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name
), ]
df[order(
df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name
), ][ranking,c(1,2)]
df[order(
df$
Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack,
df$Hospital.Name
), ][1:ranking,c(1,2)]
source('rankall.R')
rankall("heart attack", 20)
View(df_out)
source('rankall.R')
head(rankall("heart attack", 20), 10)
head(rankall("heart attack", 20), 10)
source('rankall.R')
head(rankall("heart attack", 20), 10)
source('best.R')
best("NY", "pneumonia")
best("AK", "pneumonia")
rankhospital("NC", "heart attack", "worst")
rankhospital("WA", "heart attack", 7)
rankhospital("TX", "pneumonia", 10)
rankhospital("NY", "heart attack", 7)
source("rankall.R")
head(rankall("heart attack", 20), 10)
source("rankall.R")
head(rankall("heart attack", 20), 10)
source("rankall.R")
head(rankall("heart attack", 20), 10)
source("rankall.R")
rankall("heart attack", 20)
source("rankall.R")
rankall("heart attack", 20)
source("rankall.R")
rankall("heart attack", 20)
r <- rankall("heart attack", 4)
as.character(subset(r, state == "HI")$hospital)
r <- rankall("pneumonia", "worst")
as.character(subset(r, state == "NJ")$hospital)
r <- rankall("heart failure", 10)
as.character(subset(r, state == "NV")$hospital)
